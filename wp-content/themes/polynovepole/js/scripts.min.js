jQuery(function($){
    function e() {
        var e = $(".discography-list .discography-list__item.active").data("id");
        $(".discography-active .active-item").each(function(i, n) {
            $(this).data("id") == e && ($(this).addClass("active"), $(this).siblings().removeClass("active"));
        })
    }
    var i = $("#player_audio").get(0),
        n = !1;
    $(".audio-control").on("click", function(e) {
            e.preventDefault(), 1 == n ? (i.pause(), n = !1, $(".audio-control .fa").toggleClass("hidden")) : 0 == n && (i.play(), n = !0, $(".audio-control .fa").toggleClass("hidden"))
        }), $(".open-menu-btn").click(function() {
            $(".mobileMenuWrap").toggleClass("mobileMenuWrap-showed"), $(".open-menu-btn").toggleClass("active")
        }), $(".composition-detail-btn").on("click", function() {
            var e = $(this);
            e.parent().parent().parent().parent().find(".composition-detail").addClass("showed"), e.hide("normal");
            $('html, body').animate({
                scrollTop: $('.showed').offset().top
            }, 2000);
        }), $(".closeMobileMenu").click(function() {
            $(".mobileMenuWrap").removeClass("mobileMenuWrap-showed"), $(".open-menu-btn").removeClass("active")
        }), $(".language").on("click", function() {
            $(this).find("ul li").toggle()
        }), $(".close-social-sidebar").on("click", function() {
            $(this).toggleClass("closed"), $(".social-sidebar-wrapper").animate({
                width: "toggle"
            })
        }), e(), $(".discography-list__item").on("click", function() {
            var i = $(this);
            activeDiscId = i.data("id"), i.addClass("active"), i.siblings().removeClass("active"), e()
        }), $(".composition").on("click", function() {
            var e = $(this),
                o = $(".track-list .playing").find("audio").get(0);
            void 0 != o && (o.pause(), $(".audio-control .fa").toggleClass("hidden"), o.currentTime = 0), $(".track-list .composition").removeClass("playing"), e.addClass("playing"), (i = e.find("audio").get(0)).play(), n = !0, $(".audio-control .fa").toggleClass("hidden")
        }),
        (".gallery", $(window)) && $(".gallery").toggleClass("visable"), $(".gallery_box .gllr_image_block a").fancybox();

    $('body').fadeIn(700);
    $('.menu-wrap ul li a').click(function() {
        event.preventDefault();
        newLocation = this.href;
        $('body').fadeOut(700, newpage);
        });
        function newpage() {
        window.location = newLocation;
    }

    $('.gl__post-title-wrap li:first-child').addClass('active');

        // Cache selectors
        var lastId,
            topMenu = $(".gl__post-title-wrap"),
            topMenuHeight = topMenu.outerHeight()+15,
            // All list items
            menuItems = topMenu.find("a"),
            // Anchors corresponding to menu items
            scrollItems = menuItems.map(function(){
              var item = $($(this).attr("href"));
              if (item.length) { return item; }
            });

        // Bind click handler to menu items
        // so we can get a fancy scroll animation
        menuItems.click(function(e){
          var href = $(this).attr("href"),
              offsetTop = href === "#" ? 0 : $(href).offset().top-150;
          $('html, body').stop().animate({ 
              scrollTop: offsetTop
          }, 300);
          e.preventDefault();
        });

        // Bind to scroll
        $(window).scroll(function(){
           // Get container scroll position
           var fromTop = $(this).scrollTop()+300;
           
           // Get id of current scroll item
           var cur = scrollItems.map(function(){
             if ($(this).offset().top < fromTop)
               return this;
           });
           // Get the id of the current element
           cur = cur[cur.length-1];
           var id = cur && cur.length ? cur[0].id : "";
           
           if (lastId !== id) {
               lastId = id;
               // Set/remove active class
               menuItems
                 .parent().removeClass("active")
                 .end().filter("[href='#"+id+"']").parent().addClass("active");
           }                   
        });
  window.onscroll = function(){
      scrollFunction();
  };
  function scrollFunction() {
      if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
          document.getElementById("to-top").style.opacity = "1";
      } else {
          document.getElementById("to-top").style.opacity = "0";
      }
  }
  $('#to-top').on('click',function(){
    $('html, body').animate({
            scrollTop: 0
    },
    500);
  });
}); 

